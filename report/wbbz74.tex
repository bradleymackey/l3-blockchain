\documentclass[11pt]{article}

% Make margins smaller
\usepackage[top=1in, bottom=1in, left=1in, right=1in]{geometry}
% more advanced mathematical symbols
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{bm}
\usepackage{bold-extra} % bold texttt
\usepackage{graphicx}
\usepackage{enumerate}
\usepackage[font=small,labelfont=bf]{caption} % Required for specifying captions to tables and figures
\usepackage{pgfgantt} % gantt chart!
\usepackage{titling}
\usepackage{setspace}
\renewcommand{\baselinestretch}{1.2} 
\usepackage{hyperref}
\usepackage{seqsplit}

\expandafter\def\expandafter\UrlBreaks\expandafter{\UrlBreaks%  save the current one
  \do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j%
  \do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t%
  \do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D%
  \do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N%
  \do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X%
  \do\Y\do\Z}

\graphicspath{ {./images/} }

% so that we can skip any number of items in an enumeration
\makeatletter
\newcommand{\skipitems}[1]{%
  \addtocounter{\@enumctr}{#1}%
}
\makeatother

% ALL OF THE MARKS FOR THE ASSIGNMENT COME FROM THE REPORT!

\begin{document}

\title{\textbf{Blockchain Summative}}
\date{for 22nd March 2019}
\author{Bradley Mackey}
\maketitle

Please be aware some of the hashes have line breaks in strange places---do not miss the odd wrapped character on the next line.


\section*{Task 1 - Mining Puzzles}

\begin{enumerate}
\item \textit{User ID}: \texttt{wbbz74}
\item \textit{Block hash target}: \texttt{\seqsplit{000003e7fc180000000000000000000000000000000000000000000000000000}}
\item \textit{Valid nonce}: \texttt{3856645}
\item \textit{Number of double hashes}: \texttt{3856645}\\\textit{Time taken}: 103.41s
\item 
\textit{Time to mine at initial difficulty of $1$}\\
Difficulty ($D$) 0.001 takes \texttt{103.41s}\\
$D=1 \implies 103.41\times{\frac{1}{0.001}}=103,410$ seconds\\
$\implies \frac{103410}{60}=1,723.5$ minutes\\
$\implies \frac{1723.5}{60}=28.72$ hours.\\
\\
\textit{Time to mine at peak 2018 difficulty of $7,454,968,648,263$}\\
$D=7454968648263 \implies 103.41\times{\frac{7454968648263}{0.001}}=7.70918\times10^{14}$ seconds\\
$\implies \frac{7.70918\times10^{14}}{60\times60\times24}=8.92266\times10^{9}$ days\\
$\implies \frac{8.92266\times10^{9}}{365.25}=24,428,927.04$ years\\
$\implies \frac{24428927.04}{1000}=24,428.9$ millenia.\\

\item \textit{ECDSA Public Key}: \texttt{\seqsplit{14afbb92502c9294f19be099ac3fe51f8ea1c943e36a06c43b096864d887145b55e87f1a01b1b9275bcc9d528a2829a774ec6de06dfaed72933ced851105f3ba}}

\item \textit{Hello World Signature}: \texttt{\seqsplit{acd855318df6ebb70e4c956caad1c7df1a3395c2ead557e6ec304ced9038037aa83e79ab1bb80ca3b912ea2806c67cc387301f1530e730834bb3213cf55b70d6}}

\item \textit{Signed previous Generation Signature ($SK(G)$)}: \texttt{\seqsplit{aa084cddc3d64a4425af1c1b6e4c41c0b9dd60176e41b7134bc3eb87de25f9411f83eddd7031f7048a47c5d0bfc4fdf268d6c7fd4eb41f72e65933ba8c453008}}

\item \textbf{\textit{Hit Value}}\\
SHA256(SK($G$)) = \texttt{\seqsplit{de9734e60820253cc47281d56b3e9c20d749c34f353e497000e8238eaa45cd55}}\\
\textbf{Hit Value} = \texttt{\seqsplit{de9734e60820253c}}

\item \textbf{\textit{Time to forge new block}}\\
Effective balance ($E$) = 74\\
Base target ($T_B$) = 1229782938247303\\
Time since last block ($t$) = $t$ (to determine)\\
New Target = $E\times T_B\times t=91003937430300422t$\\
\\
Block can be forged when hit value is less than target.\\
Hit Value (decimal) = 16039346760486757692\\
$\therefore t=\frac{16039346760486757692}{91003937430300422}=176.25$ (2 d.p.)\\
\textbf{Block can be forged after 176.25 seconds.}


\end{enumerate}

\section*{Task 2 - Transactions \& bitcoin-testnet}

\begin{enumerate}
\item User ID: \texttt{wbbz74}
\item 
\begin{enumerate}
\item \url{https://www.blockchain.com/btc/tx/cfe6cc5158f435f59c4daa24f66378ff56baf2980d04c92612e2adf222bb19b8}
\item \url{https://www.blockchain.com/btc/tx/348e8846eccca909c67eade94b3df0c84ab07133159b25759f4b3cac303904ec}
\item \url{https://www.blockchain.com/btc/tx/f3d7d00d0534fd7d59fb1cb4311dad4e42fef1b6174321342a9ed2af21d9bd25}
\end{enumerate}
\item 
\begin{enumerate}

\item This is a transaction with 2 inputs and 3 outputs. One of the outputs is a basic zero-value data transaction, making use of the \texttt{OP\_RETURN} word to ensure the output can never be redeemed, placing some arbitrary data into the blockchain. 
The 2 inputs, as well as the 2 remaining outputs, use a Pay-to-Public-Key Hash (P2PKH) scheme for transferring coins---this can be identified as all the addresses begin with the number \texttt{1}. 
The inputs prove to the blockchain they are in control of the private keys associated with the previous transaction that sent them the coins by providing a signature---derived from their private key---and their public key. 
At the end of execution of the script, if the signatures are valid, the stack terminates with \texttt{TRUE}. This allows the inputs to be sent successfully. 
The recipients, also using P2PKH, provide a script which will allow them to later redeem coins in a transaction block, given they are in posession of the private key for the recipient address. This scriptPubKey (the script used to lock the Bitcoins) is of the form: \texttt{OP\_DUP} \texttt{OP\_HASH160} \textit{hashedPublicKey} \texttt{OP\_EQUALVERIFY} \texttt{OP\_CHECKSIG}.

\item This is a simple transaction with 1 input and 2 outputs. The input uses a P2PKH scheme similar to the previous transaction. One of our outputs also uses P2PKH, but the other uses Pay-to-Script-Hash (P2SH)---which can be identified as the address begins with a \texttt{3}. This differs from most other standard scripts available on the Bitcoin network as it allows for any arbitrarily complex script to take constant space on the blockchain, taking only 23 bytes. As the Bitcoin is being sent to a P2SH scheme, little effort is required, the sender only has to check the hash of what is otherwise a very long script (for example, this could be a large multi-sig transaction, but we are unaware of this). P2SH's scriptPubKey is of the (much shorter) form: \texttt{OP\_HASH160} \textit{hashedScript} \texttt{OP\_EQUAL}.

\item This is a transaction with 2 inputs and 3 outputs. One of the outputs is a zero-value data transaction. One of the inputs and outputs use P2PKH. This transaction also includes an input and output using Pay-to-Multisig (P2MS). These have the same requirement of requiring only 1 possible signature for 3 possible public keys, enabling 3 keyholders to exist, but only 1 of these is needed to authorise the sending of coins. Focusing on the input, we see the scriptPubKey is of the form: \texttt{OP\_1} \textit{pubKey1} \textit{pubKey2} \textit{pubKey3} \texttt{OP\_3} \texttt{OP\_CHECKMULTISIG}. The scriptSig (script used to unlock the coins, to be sent in a transaction) is of the form: \texttt{OP\_0} \textit{signature}. It is within this script we see the single signature required in order to send the previously locked Bitcoins. The reason for the \texttt{OP\_0} before the signature is due to the well known bug in \texttt{OP\_CHECKMULTISIG}, where the signature extraction variable (\texttt{OP\_1} in our case) will consume 1 more input than stated. Therefore, we pad the stack with a dummy `\texttt{OP\_0}' to prevent this function consuming data it is not supposed to.

\end{enumerate}

\item \textit{Bitcoin Testnet Address}: \texttt{mjLjznCbyKuGJ5xuz7Wo1Es3qXHoxoDXgo}

\item \textbf{\textit{100 Satoshi Transaction}}\\
\textit{TX ID}: \texttt{\seqsplit{74b5486e061ac680cde0f132b0dec6c5010d2dee8da3a2856d680fcf5bf41c37}}\\
\textit{Link}: \url{https://chain.so/tx/BTCTEST/74b5486e061ac680cde0f132b0dec6c5010d2dee8da3a2856d680fcf5bf41c37}

\item \textbf{\textit{Student ID Proof-of-Burn Transaction}}\\
\textit{TX ID}: \texttt{\seqsplit{bd1c2552fc0effda71e4e09137d8106aa6c67239dfba1e760040d1c78b66e0ac}}\\
\textit{Link}: \url{https://chain.so/tx/BTCTEST/bd1c2552fc0effda71e4e09137d8106aa6c67239dfba1e760040d1c78b66e0ac}

\item \textbf{\textit{Student ID Proof-of-Burn Script}}\\
\textit{Script Hex}: \texttt{6a067762627a3734}\\
We can add data to the blockchain by immediately invalidating the script, allowing the remainder of the script to be interpreted as pure data.
The first byte, \texttt{6a}, is the \texttt{OP\_RETURN} word. This invalidates the script, such that any attempt to redeem any Bitcoins contained in this transaction would instantly fail, as per the semantics of Bitcoin Script (therefore this is a very bad script to use if actually sending bitcoins!).
The next byte, \texttt{06}, is the number of bytes that we will push onto the stack next---``wbbz74'' is 6 characters long (6 bytes when ASCII encoded), so this is just 6. 
The remainder of the script, \texttt{7762627a3734}, is the ASCII encoded ``wbbz74'', which will be interpreted on the blockchain as pure data.

\end{enumerate}

\section*{Task 3 - A Wise Investment?}

% In your report explain in 400-500 words whether you think it would be wiser to invest in bitcoin, NXT or gold (real physical gold) at the moment.
% Justify your stance as far as possible.
% (I am not actually going to judge your investment advice, but rather whether you have considered all the different factors, suitably evaluated them and come to a coherent conclusion.)

400-500 WORDS ABOUT WHICH IS THE MOST WISE INVESTMENT? Easy stuff.


\end{document}